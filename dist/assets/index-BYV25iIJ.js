(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=a(n);fetch(n.href,s)}})();const g={id:"standard",name:"Standard Time",description:"Gregorian calendar with 24-hour time",category:"standard",tickInterval:1e3,format(e){return{type:"split",date:{formatted:e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),era:"CE"},time:{formatted:e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),unitLabels:["hours","minutes","seconds"]}}}},h=[g],r=new Map;for(const e of h){if(!C(e)){const t=e.id??"unknown";console.warn(`[Chronoshift] Invalid system definition: ${t}`);continue}if(r.has(e.id)){console.warn(`[Chronoshift] Duplicate system ID: ${e.id}`);continue}r.set(e.id,e)}function C(e){if(!e||typeof e!="object")return!1;const t=e;return typeof t.id=="string"&&typeof t.name=="string"&&typeof t.description=="string"&&typeof t.format=="function"}function _(){return Array.from(r.values())}function y(e){return r.get(e)}function v(){return r.get("standard")??Array.from(r.values())[0]}function E(e,t){switch(t.innerHTML="",t.className=`display display--${e.type}`,e.type){case"unified":b(e,t);break;case"split":x(e,t);break;case"segmented":N(e,t);break}}function b(e,t){const a=document.createElement("div");if(a.className="display__main",e.prefix){const n=document.createElement("span");n.className="display__prefix",n.textContent=e.prefix,a.appendChild(n)}const o=document.createElement("span");if(o.className="display__value",o.textContent=e.value,a.appendChild(o),e.suffix){const n=document.createElement("span");n.className="display__suffix",n.textContent=e.suffix,a.appendChild(n)}if(t.appendChild(a),e.label){const n=document.createElement("div");n.className="display__label",n.textContent=e.label,t.appendChild(n)}if(e.sublabel){const n=document.createElement("div");n.className="display__sublabel",n.textContent=e.sublabel,t.appendChild(n)}}function x(e,t){const a=document.createElement("div");if(a.className="display__date",a.textContent=e.date.formatted,e.date.era){const s=document.createElement("span");s.className="display__era",s.textContent=` ${e.date.era}`,a.appendChild(s)}const o=document.createElement("div");if(o.className="display__time",o.textContent=e.time.formatted,e.time.period){const s=document.createElement("span");s.className="display__period",s.textContent=` ${e.time.period}`,o.appendChild(s)}t.appendChild(a);const n=document.createElement("span");n.className="display__separator",n.textContent=e.separator??" â€¢ ",t.appendChild(n),t.appendChild(o)}function N(e,t){const a=document.createElement("div");a.className="display__segments",e.segments.forEach((o,n)=>{if(n>0){const d=document.createElement("span");d.className="display__seg-separator",d.textContent=e.separator??":",a.appendChild(d)}const s=document.createElement("div");s.className="display__segment";const i=document.createElement("span");i.className="display__seg-value",i.textContent=String(o.value),s.appendChild(i);const c=document.createElement("span");c.className="display__seg-label",c.textContent=o.label,s.appendChild(c),a.appendChild(s)}),t.appendChild(a)}const m=document.getElementById("system-selector"),S=document.getElementById("time-display");let u=v(),p;function w(){const e=_();for(const t of e){const a=document.createElement("option");a.value=t.id,a.textContent=t.name,a.title=t.description,m.appendChild(a)}}function l(){const e=new Date,t=u.format(e);E(t,S)}function f(e){const t=y(e);t&&(u=t,clearInterval(p),l(),p=window.setInterval(l,t.tickInterval??1e3),localStorage.setItem("chronoshift-system",e))}function I(){w();const e=localStorage.getItem("chronoshift-system");e&&y(e)?(m.value=e,f(e)):(l(),p=window.setInterval(l,u.tickInterval??1e3)),m.addEventListener("change",t=>{f(t.target.value)})}I();
