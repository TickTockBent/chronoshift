(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=o(n);fetch(n.href,a)}})();const v={id:"standard",name:"Standard Time",description:"Gregorian calendar with 24-hour time",category:"standard",tickInterval:1e3,learnMoreUrl:"https://en.wikipedia.org/wiki/Gregorian_calendar",format(e){return{type:"split",date:{formatted:e.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),era:"CE"},time:{formatted:e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),unitLabels:["hours","minutes","seconds"]}}}},S={id:"epoch-seconds",name:"Unix Epoch",description:"Seconds elapsed since January 1, 1970 00:00:00 UTC",category:"epoch",tickInterval:1e3,learnMoreUrl:"https://en.wikipedia.org/wiki/Unix_time",format(e){return{type:"unified",value:Math.floor(e.getTime()/1e3).toLocaleString(),label:"seconds since epoch",sublabel:"January 1, 1970 00:00:00 UTC"}}},w={id:"kiloseconds",name:"Kiloseconds",description:"SI-prefix time: today measured in kiloseconds",category:"metric",tickInterval:1e3,learnMoreUrl:"https://en.wikipedia.org/wiki/Metric_time",format(e){const t=new Date(e);t.setHours(0,0,0,0);const i=((e.getTime()-t.getTime())/1e3/1e3).toFixed(3),n=Math.floor((e.getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5);return{type:"unified",value:i,suffix:" ks",label:"kiloseconds today",sublabel:`Day ${n} of ${e.getFullYear()}`}}},_={id:"swatch-beats",name:"Swatch Internet Time",description:"Day divided into 1000 .beats, referenced to Biel, Switzerland",category:"metric",tickInterval:86.4,learnMoreUrl:"https://en.wikipedia.org/wiki/Swatch_Internet_Time",format(e){const o=e.getTime()+e.getTimezoneOffset()*6e4+36e5,i=new Date(o),n=new Date(i);n.setUTCHours(0,0,0,0);const a=o-n.getTime();return{type:"unified",prefix:"@",value:Math.floor(a/86400).toString().padStart(3,"0"),label:".beats",sublabel:"No time zones. @000 = midnight in Biel."}}},E=["Vendémiaire","Brumaire","Frimaire","Nivôse","Pluviôse","Ventôse","Germinal","Floréal","Prairial","Messidor","Thermidor","Fructidor"],M=["La Fête de la Vertu","La Fête du Génie","La Fête du Travail","La Fête de l'Opinion","La Fête des Récompenses","La Fête de la Révolution"];function k(e){const t=[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]];let o="";for(const[i,n]of t)for(;e>=i;)o+=n,e-=i;return o}function I(e){return e<3?!1:e<=20?(e-3)%4===0:e%4===0&&(e%100!==0||e%400===0)}function x(e){const n=new Date(1792,8,22),s=Math.floor((e.getTime()-n.getTime())/864e5);if(s<0)return{year:0,month:0,day:1,isComplementary:!1};let r=s,l=1;for(;;){const m=I(l)?366:365;if(r<m)break;r-=m,l++}return r>=360?{year:l,month:-1,day:r-360,isComplementary:!0}:{year:l,month:Math.floor(r/30),day:r%30+1,isComplementary:!1}}const D={id:"decimal-french",name:"French Republican",description:"Revolutionary decimal time: 10 hours/day, 100 min/hour, 100 sec/min",category:"cultural",tickInterval:864,learnMoreUrl:"https://en.wikipedia.org/wiki/French_Republican_calendar",format(e){const t=x(e),o=new Date(e);o.setHours(0,0,0,0);const n=(e.getTime()-o.getTime())/864e5,a=Math.floor(n*1e5),s=Math.floor(a/1e4),r=Math.floor(a%1e4/100),l=a%100,m=`${s}:${r.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`;let p;return t.isComplementary?p=M[t.day]??`Jour complémentaire ${t.day+1}`:p=`${t.day} ${E[t.month]}`,{type:"split",date:{formatted:p,era:`An ${k(t.year)}`},time:{formatted:m,unitLabels:["heures","minutes décimales","secondes décimales"]},separator:" — "}}},L={id:"holocene",name:"Holocene Era",description:"Adds 10,000 years to represent the Human Era (HE)",category:"calendar",tickInterval:1e3,learnMoreUrl:"https://en.wikipedia.org/wiki/Holocene_calendar",format(e){const t=e.getFullYear()+1e4;return{type:"split",date:{formatted:e.toLocaleDateString("en-US",{month:"long",day:"numeric"})+`, ${t.toLocaleString()}`,era:"HE"},time:{formatted:e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}}}},T=[v,S,w,_,D,L],c=new Map;for(const e of T){if(!N(e)){const t=e.id??"unknown";console.warn(`[Chronoshift] Invalid system definition: ${t}`);continue}if(c.has(e.id)){console.warn(`[Chronoshift] Duplicate system ID: ${e.id}`);continue}c.set(e.id,e)}function N(e){if(!e||typeof e!="object")return!1;const t=e;return typeof t.id=="string"&&typeof t.name=="string"&&typeof t.description=="string"&&typeof t.format=="function"}function U(){return Array.from(c.values())}function C(e){return c.get(e)}function F(){return c.get("standard")??Array.from(c.values())[0]}function $(e,t){switch(t.innerHTML="",t.className=`display display--${e.type}`,e.type){case"unified":O(e,t);break;case"split":H(e,t);break;case"segmented":Y(e,t);break}}function O(e,t){const o=document.createElement("div");if(o.className="display__main",e.prefix){const n=document.createElement("span");n.className="display__prefix",n.textContent=e.prefix,o.appendChild(n)}const i=document.createElement("span");if(i.className="display__value",i.textContent=e.value,o.appendChild(i),e.suffix){const n=document.createElement("span");n.className="display__suffix",n.textContent=e.suffix,o.appendChild(n)}if(t.appendChild(o),e.label){const n=document.createElement("div");n.className="display__label",n.textContent=e.label,t.appendChild(n)}if(e.sublabel){const n=document.createElement("div");n.className="display__sublabel",n.textContent=e.sublabel,t.appendChild(n)}}function H(e,t){const o=document.createElement("div");if(o.className="display__date",o.textContent=e.date.formatted,e.date.era){const a=document.createElement("span");a.className="display__era",a.textContent=` ${e.date.era}`,o.appendChild(a)}const i=document.createElement("div");if(i.className="display__time",i.textContent=e.time.formatted,e.time.period){const a=document.createElement("span");a.className="display__period",a.textContent=` ${e.time.period}`,i.appendChild(a)}t.appendChild(o);const n=document.createElement("span");n.className="display__separator",n.textContent=e.separator??" • ",t.appendChild(n),t.appendChild(i)}function Y(e,t){const o=document.createElement("div");o.className="display__segments",e.segments.forEach((i,n)=>{if(n>0){const l=document.createElement("span");l.className="display__seg-separator",l.textContent=e.separator??":",o.appendChild(l)}const a=document.createElement("div");a.className="display__segment";const s=document.createElement("span");s.className="display__seg-value",s.textContent=String(i.value),a.appendChild(s);const r=document.createElement("span");r.className="display__seg-label",r.textContent=i.label,a.appendChild(r),o.appendChild(a)}),t.appendChild(o)}const y=document.getElementById("system-selector"),P=document.getElementById("time-display"),f=document.getElementById("learn-more");let d=F(),h;function R(){const e=U();for(const t of e){const o=document.createElement("option");o.value=t.id,o.textContent=t.name,o.title=t.description,y.appendChild(o)}}function u(){const e=new Date,t=d.format(e);$(t,P)}function b(){d.learnMoreUrl?(f.href=d.learnMoreUrl,f.style.display=""):f.style.display="none"}function g(e){const t=C(e);t&&(d=t,clearInterval(h),u(),h=window.setInterval(u,t.tickInterval??1e3),b(),localStorage.setItem("chronoshift-system",e))}function A(){R();const e=localStorage.getItem("chronoshift-system");e&&C(e)?(y.value=e,g(e)):(u(),h=window.setInterval(u,d.tickInterval??1e3),b()),y.addEventListener("change",t=>{g(t.target.value)})}A();
